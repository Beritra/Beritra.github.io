<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/icon.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon.jpg">
  <link rel="mask-icon" href="/images/icon.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://Beritra.github.com').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="今天了解下听说了好久，但是没怎么用过的东西。">
<meta property="og:type" content="article">
<meta property="og:title" content="Vertx和响应式编程">
<meta property="og:url" content="http:&#x2F;&#x2F;beritra.github.com&#x2F;2021&#x2F;08&#x2F;09&#x2F;Vertx%E5%92%8C%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B&#x2F;index.html">
<meta property="og:site_name" content="Beritra">
<meta property="og:description" content="今天了解下听说了好久，但是没怎么用过的东西。">
<meta property="og:image" content="data:image&#x2F;svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjI0NSAxNjQgNTAzIDE5MSIgd2lkdGg9IjUwMyIgaGVpZ2h0PSIxOTEiPjxkZWZzPjxtYXJrZXIgb3JpZW50PSJhdXRvIiBvdmVyZmxvdz0idmlzaWJsZSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBpZD0iYiIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB2aWV3Qm94PSItMSAtMyA3IDYiIG1hcmtlcldpZHRoPSI3IiBtYXJrZXJIZWlnaHQ9IjYiIGNvbG9yPSIjOTQyMDkyIj48cGF0aCBkPSJNNC44IDBIMG0wLTEuOEw0LjggMCAwIDEuOCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiLz48L21hcmtlcj48bWFya2VyIG9yaWVudD0iYXV0byIgb3ZlcmZsb3c9InZpc2libGUiIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCIgaWQ9ImMiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgdmlld0JveD0iLTEgLTMgNyA2IiBtYXJrZXJXaWR0aD0iNyIgbWFya2VySGVpZ2h0PSI2IiBjb2xvcj0iIzk0MjA5MiI+PHBhdGggZD0iTTQuOCAwSDBtMC0xLjhMNC44IDAgMCAxLjgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIi8+PC9tYXJrZXI+PGZpbHRlciBpZD0iYSIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIxOTQuNyIgeT0iMTQ0LjkiPjxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0iYmx1ciIgc3RkRGV2aWF0aW9uPSI1LjIzMiIvPjxmZU9mZnNldCBpbj0iYmx1ciIgcmVzdWx0PSJvZmZzZXQiIGR5PSIxIi8+PGZlRmxvb2QgZmxvb2QtY29sb3I9IiMwMDAiIGZsb29kLW9wYWNpdHk9Ii41IiByZXN1bHQ9ImZsb29kIi8+PGZlQ29tcG9zaXRlIGluPSJmbG9vZCIgaW4yPSJvZmZzZXQiIG9wZXJhdG9yPSJpbiIvPjwvZmlsdGVyPjwvZGVmcz48ZyBmaWxsPSJub25lIj48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00MDguNSAxOTUuNjI1SDU4MnYxMjguNUg0MDguNXoiLz48cGF0aCBkPSJNNDA3LjgyIDE5NS42MjZsMTc1LjI1OC0uMzQzbS0uNjY0LS43MmwtLjIzMiAxMzAuMTE2bS42MzItLjQ0M2wtMTc0Ljc3NS4yNThtLjQ5NC45MjJsLS4wMzMtMTMwLjYzMm0tLjU1NS42MTdsMTc0LjU5Mi0uMjdtLjEyNS0uNjkybC0uMjU1IDEyOS42NzNtLjUzMi4wNjVsLTE3NC4yODEuMjk4bS0uMDI1LjgxNmwtLjA0Ny0xMjkuNzkxIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI2MC41IDIxMS4yNWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik0yNjAuMDE2IDIxMS4yNDlsMTY3LjQyNC4zNjZtLS42NDYtLjYyOWwtLjYyMiAzNy44NjltLjMwNC0uMzcybC0xNjUuODQxLjQ0bS4zMDkuOTlsLS40NTUtMzkuNjI5bS0uMzQ4LjgwN2wxNjYuNzY3LjM0M20uMDg3LS41NzJsLS42OSAzNy40OTdtLjI5Ny4xMTJsLTE2NS41NDQuMzg4bS0uMDIuOTNsLS40NjUtMzguNjYzIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI2MC41IDI3MWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik0yNjAuMjEyIDI3MWwxNjcuMDkuMDY5bS0uNjQ4LS41MzZsLjAyIDM4LjYyMm0uNzE1LS4yOThsLTE2Ny45MDktLjM4M20uODUxLjMxMmwuMTctMzguMTI3bS0uMTY0LjEyNGwxNjYuNDQyLjA4bS4wMjktLjQ1NWwuMDIgMzguMzIybS42ODYuMDM4bC0xNjcuMDU2LS40bS0uMDQuMjkybC4xNDMtMzcuNzg1IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTU2Ni41IDIxMS4yNWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik01NjUuNjU5IDIxMS4yNTFsMTY3LjUwNS0uMjI5bS0uNjM1LS40NDJsLS4zNyAzOS4xMjZtLjM5My0uOTc4bC0xNjYuNDc3LS4xOTltLjY2LjM3OWwtLjIzOC0zOC4xMjNtLS43MTMuMzE2bDE2Ni44NjYtLjMxMW0uMTEtLjMzNGwtLjQxIDM4LjE0N20uMzI3LjA4MmwtMTY1LjgyLS4xODNtLS4wNDMuMjgxbC0uMjY2LTM3LjY1OCIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik01NjYuNSAyNzFoMTY2djM3LjVoLTE2NnoiLz48cGF0aCBkPSJNNTY1Ljg1NSAyNzAuOTk4bDE2Ny4xNy40ODFtLS42MzItLjM1MmwuMjc4IDM3Ljg4bS43OTQtLjkwOGwtMTY3Ljc5NC0uMDE1bS40NTcuNDQ2bC4zNzgtMzguMTJtLS41MjYuMzhsMTY2LjU0LjU1Mm0uMDU3LS4zNGwuMjk3IDM2Ljk3MW0uNzE2LjAwNmwtMTY3LjMzMi4wMzJtLS4wNTguMzkzbC4zMzYtMzcuNTMiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48L2c+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQwOC41IDE5NS42MjVINTgydjEyOC41SDQwOC41eiIvPjxwYXRoIGQ9Ik00MDcuODIgMTk1LjYyNmwxNzUuMjU4LS4zNDNtLS42NjQtLjcybC0uMjMyIDEzMC4xMTZtLjYzMi0uNDQzbC0xNzQuNzc1LjI1OG0uNDk0LjkyMmwtLjAzMy0xMzAuNjMybS0uNTU1LjYxN2wxNzQuNTkyLS4yN20uMTI1LS42OTJsLS4yNTUgMTI5LjY3M20uNTMyLjA2NWwtMTc0LjI4MS4yOThtLS4wMjUuODE2bC0uMDQ3LTEyOS43OTEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MTMuNSAyNTEuODc1KSIgZmlsbD0iIzAwMCI+PHRzcGFuIGZvbnQtZmFtaWx5PSJSb2JvdG8gQ29uZGVuc2VkIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNDAwIiB4PSIzOC41NCIgeT0iMTMiPlNoYXJlZCBtZW1vcnk8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjYwLjUgMjExLjI1aDE2NnYzNy41aC0xNjZ6Ii8+PHBhdGggZD0iTTI2MC4wMTYgMjExLjI0OWwxNjcuNDI0LjM2Nm0tLjY0Ni0uNjI5bC0uNjIyIDM3Ljg2OW0uMzA0LS4zNzJsLTE2NS44NDEuNDRtLjMwOS45OWwtLjQ1NS0zOS42MjltLS4zNDguODA3bDE2Ni43NjcuMzQzbS4wODctLjU3MmwtLjY5IDM3LjQ5N20uMjk3LjExMmwtMTY1LjU0NC4zODhtLS4wMi45M2wtLjQ2NS0zOC42NjMiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNjUuNSAyMjIpIiBmaWxsPSIjMDAwIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjUzLjc1IiB5PSIxMyI+VGhyZWFkIDE8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjYwLjUgMjcxaDE2NnYzNy41aC0xNjZ6Ii8+PHBhdGggZD0iTTI2MC4yMTIgMjcxbDE2Ny4wOS4wNjltLS42NDgtLjUzNmwuMDIgMzguNjIybS43MTUtLjI5OGwtMTY3LjkwOS0uMzgzbS44NTEuMzEybC4xNy0zOC4xMjdtLS4xNjQuMTI0bDE2Ni40NDIuMDhtLjAyOS0uNDU1bC4wMiAzOC4zMjJtLjY4Ni4wMzhsLTE2Ny4wNTYtLjRtLS4wNC4yOTJsLjE0My0zNy43ODUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNjUuNSAyODEuNzUpIiBmaWxsPSIjMDAwIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjUzLjc1IiB5PSIxMyI+VGhyZWFkIDI8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNTY2LjUgMjExLjI1aDE2NnYzNy41aC0xNjZ6Ii8+PHBhdGggZD0iTTU2NS42NTkgMjExLjI1MWwxNjcuNTA1LS4yMjltLS42MzUtLjQ0MmwtLjM3IDM5LjEyNm0uMzkzLS45NzhsLTE2Ni40NzctLjE5OW0uNjYuMzc5bC0uMjM4LTM4LjEyM20tLjcxMy4zMTZsMTY2Ljg2Ni0uMzExbS4xMS0uMzM0bC0uNDEgMzguMTQ3bS4zMjcuMDgybC0xNjUuODItLjE4M20tLjA0My4yODFsLS4yNjYtMzcuNjU4IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcxLjUgMjIyKSIgZmlsbD0iIzAwMCI+PHRzcGFuIGZvbnQtZmFtaWx5PSJSb2JvdG8gQ29uZGVuc2VkIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNDAwIiB4PSI1My43NSIgeT0iMTMiPlRocmVhZCAzPC90c3Bhbj48L3RleHQ+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTU2Ni41IDI3MWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik01NjUuODU1IDI3MC45OThsMTY3LjE3LjQ4MW0tLjYzMi0uMzUybC4yNzggMzcuODhtLjc5NC0uOTA4bC0xNjcuNzk0LS4wMTVtLjQ1Ny40NDZsLjM3OC0zOC4xMm0tLjUyNi4zOGwxNjYuNTQuNTUybS4wNTctLjM0bC4yOTcgMzYuOTcxbS43MTYuMDA2bC0xNjcuMzMyLjAzMm0tLjA1OC4zOTNsLjMzNi0zNy41MyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDU3MS41IDI4MS43NSkiIGZpbGw9IiMwMDAiPjx0c3BhbiBmb250LWZhbWlseT0iUm9ib3RvIENvbmRlbnNlZCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjQwMCIgeD0iNTMuNzUiIHk9IjEzIj5UaHJlYWQgNDwvdHNwYW4+PC90ZXh0PjxwYXRoIGQ9Ik0yOTYuMzAxIDMzMy4xMzZjLjE5OS0uODc3IDIuNjUtMTguMTM4IDkuMTk5LTE4Ljk0OCA2LjI4OC0xLjE0MSA1Ljg2MSAxMi44ODUgMTUgMTQuMDcgOS4xNy0uMjc1IDYuNTAzLTExLjc4NyAxNi0xMiA5LjQ3LjM0MiA2LjYzNyAxMi42MiAxNSAxMyA4LjkxLS44NjUgNC45NTYtMTUuODg0IDE3LTEzIDUuMzAzIDEuMzU5IDExLjAyNCA2LjcyNyAxNC42OCAxMS4zNzltLTg2Ljg3OSA1LjVjLjY5OS0xLjM3OCAzLjE1LTE4LjY0IDkuNjk5LTE5LjQ1IDYuMjg4LTEuMTQgNS44NjEgMTIuODg2IDE1IDE0LjA3MiA5LjE3LS4yNzYgNi41MDMtMTEuNzg4IDE2LTEyIDkuNDcuMzQgNi42MzcgMTIuNjIgMTUgMTMgOC45MS0uODY2IDQuOTU2LTE1Ljg4NSAxNy0xMyA1LjMwMyAxLjM1OCAxMS4wMjQgNi43MjYgMTQuNjggMTEuMzc4bS04Ny4zMzYtMTM3LjdjLjE1Ni42ODggMi4yIDE2Ljk0MiA5LjE1NiAxOC43NTkgNi45MyAxLjExIDYuMjQxLTEzLjIxIDE1LTE0LjA3MSA4LjUwNS4wOTQgNy41OTUgMTIuNjEzIDE2IDEyIDguMDk4LjQ3NyA2LjI4Mi0xMi4zNzEgMTUtMTMgOS41OTMuNDc1IDYuNDEgMTUuNDIxIDE3IDEzIDUuMzY2LS45MTYgMTEuMTU1LTYuNzEzIDE0LjY4LTExLjM3OG0tODYuODM2LTUuMzFjLjY1Ni4xODggMi43IDE2LjQ0MiA5LjY1NiAxOC4yNTkgNi45MyAxLjExIDYuMjQxLTEzLjIxIDE1LTE0LjA3MSA4LjUwNS4wOTQgNy41OTUgMTIuNjEzIDE2IDEyIDguMDk4LjQ3NyA2LjI4Mi0xMi4zNzEgMTUtMTMgOS41OTMuNDc1IDYuNDEgMTUuNDIxIDE3IDEzIDUuMzY2LS45MTYgMTEuMTU1LTYuNzEzIDE0LjY4LTExLjM3OG0yMTguNzA3LTQuNjIxYy4xMTMuNDk5IDEuNzUgMTcuNzcxIDkuMTEzIDE4LjU3IDYuMTkzIDEuMDkzIDYuNjIyLTE0LjEgMTUtMTQuMDcxIDkuNTk5LS4xMjMgNi45MjkgMTIuNDQ2IDE2IDEyIDguNDg0LS41NzcgNS45MjctMTMuMTc1IDE1LTEzIDguNDYzLjAwMyA1LjU5NSAxNS42MjcgMTcgMTMgNS40MjktLjczNCA5Ljk5NS02LjExOCAxNC42OC0xMS4zNzhtLTg2Ljc5My01LjEyMWMuNjEzLS4wMDEgMi4yNSAxNy4yNzEgOS42MTMgMTguMDcgNi4xOTMgMS4wOTMgNi42MjItMTQuMSAxNS0xNC4wNzEgOS41OTktLjEyMyA2LjkyOSAxMi40NDYgMTYgMTIgOC40ODQtLjU3NyA1LjkyNy0xMy4xNzUgMTUtMTMgOC40NjMuMDAzIDUuNTk1IDE1LjYyNyAxNyAxMyA1LjQyOS0uNzM0IDkuOTk1LTYuMTE4IDE0LjY4LTExLjM3OCIgbWFya2VyLWVuZD0idXJsKCNiKSIgc3Ryb2tlPSIjOTQyMDkyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGQ9Ik02MDIuMTg0IDMzMy42NTRjLjMxNi0xLjM5NSAyLjExLTE3LjcwMiA5LjMxNi0xOS40NjYgNi43NC0xLjIyMiA2LjAwMiAxMy43MjUgMTUgMTQuMDcgOS4zNjEuNCA2LjY4OS0xMi42MiAxNi0xMiA5LjY0Mi4zNDIgNi42NzMgMTIuMjI2IDE1IDEzIDguNy40IDUuNDE5LTE0Ljg1MyAxNy0xMyA1LjYxNyAxLjE3NCAxMC4zODYgNS44MzMgMTQuNjggMTEuMzc5bS04Ni45OTYgNi4wMTdjLjgxNi0xLjg5NSAyLjYxLTE4LjIwMiA5LjgxNi0xOS45NjYgNi43NC0xLjIyMiA2LjAwMiAxMy43MjUgMTUgMTQuMDcgOS4zNjEuNCA2LjY4OS0xMi42MiAxNi0xMiA5LjY0Mi4zNDIgNi42NzMgMTIuMjI2IDE1IDEzIDguNy40IDUuNDE5LTE0Ljg1MyAxNy0xMyA1LjYxNyAxLjE3NCAxMC4zODYgNS44MzMgMTQuNjggMTEuMzc5IiBtYXJrZXItZW5kPSJ1cmwoI2MpIiBzdHJva2U9IiM5NDIwOTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzE2LjY2NCAxNjkpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICMxPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzE2LjY2NCAzMzUuNzUpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICMyPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjIyLjY2NCAxNjkpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICMzPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjIyLjY2NCAzMzUuNzUpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICM0PC90c3Bhbj48L3RleHQ+PC9nPjwvc3ZnPg&#x3D;&#x3D;">
<meta property="og:image" content="data:image&#x2F;svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjM3NCAzMjggNzM1IDMzNSIgd2lkdGg9IjczNSIgaGVpZ2h0PSIzMzUiPjxkZWZzPjxtYXJrZXIgb3JpZW50PSJhdXRvIiBvdmVyZmxvdz0idmlzaWJsZSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBpZD0iYiIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB2aWV3Qm94PSItMSAtMyA2IDYiIG1hcmtlcldpZHRoPSI2IiBtYXJrZXJIZWlnaHQ9IjYiIGNvbG9yPSIjMDAwIj48cGF0aCBkPSJNMy43MzMgMEwwLTEuNHYyLjh6IiBmaWxsPSJjdXJyZW50Q29sb3IiIHN0cm9rZT0iY3VycmVudENvbG9yIi8+PC9tYXJrZXI+PG1hcmtlciBvcmllbnQ9ImF1dG8iIG92ZXJmbG93PSJ2aXNpYmxlIiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiIGlkPSJjIiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHZpZXdCb3g9Ii0xIC0zIDcgNiIgbWFya2VyV2lkdGg9IjciIG1hcmtlckhlaWdodD0iNiIgY29sb3I9IiM5NDExMDAiPjxwYXRoIGQ9Ik00LjggMEgwbTAtMS44TDQuOCAwIDAgMS44IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIvPjwvbWFya2VyPjxmaWx0ZXIgaWQ9ImEiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMzAwLjUiIHk9IjI5NC41Ij48ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9ImJsdXIiIHN0ZERldmlhdGlvbj0iNS4yMzIiLz48ZmVPZmZzZXQgaW49ImJsdXIiIHJlc3VsdD0ib2Zmc2V0IiBkeT0iMSIvPjxmZUZsb29kIGZsb29kLWNvbG9yPSIjMDAwIiBmbG9vZC1vcGFjaXR5PSIuNSIgcmVzdWx0PSJmbG9vZCIvPjxmZUNvbXBvc2l0ZSBpbj0iZmxvb2QiIGluMj0ib2Zmc2V0IiBvcGVyYXRvcj0iaW4iLz48L2ZpbHRlcj48L2RlZnM+PGcgZmlsbD0ibm9uZSI+PGcgZmlsdGVyPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNDM4IDQyMi43NTJoNjU1djM3LjVINDM4eiIvPjxwYXRoIGQ9Ik00MzcuMzIgNDIyLjc1Mmw2NTYuNzU4LS4zNDFtLS42NjEtLjcybC0uMjM3IDM5LjExNW0uNjMzLS40NDJsLTY1Ni4yNzQuMjU2bS40OTQuOTIzTDQzOCA0MjEuOTExbS0uNTU0LjYxNmw2NTYuMDkyLS4yNjhtLjEyOC0uNjkzbC0uMjU4IDM4LjY3NG0uNTMyLjA2NWwtNjU1Ljc4MS4yOTdtLS4wMjQuODE2bC0uMDQ4LTM4Ljc5MSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00MzggNTQ1aDY1NXYzNy41SDQzOHoiLz48cGF0aCBkPSJNNDM3LjUxNiA1NDVsNjU2LjQyNC4zNjRtLS42NDctLjYyOGwtLjYyIDM3Ljg2OW0uMzAzLS4zNzFsLTY1NC44NDEuNDM4bS4zMDkuOTkxbC0uNDU1LTM5LjYyOW0tLjM0OC44MDdsNjU1Ljc2Ny4zNDNtLjA4Ny0uNTcybC0uNjkgMzcuNDk3bS4yOTYuMTEzbC02NTQuNTQzLjM4N20tLjAyLjkzbC0uNDY1LTM4LjY2MyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00MzggNDg0aDY1NXYzNy41SDQzOHoiLz48cGF0aCBkPSJNNDM3LjE1OSA0ODRsNjU2LjUwNS0uMjI3bS0uNjM1LS40NDNsLS4zNjkgMzkuMTI2bS4zOTItLjk3OWwtNjU1LjQ3Ny0uMTk3bS42Ni4zNzhsLS4yMzgtMzguMTIzbS0uNzEzLjMxNmw2NTUuODY2LS4zMTFtLjExLS4zMzRsLS40MSAzOC4xNDdtLjMyNy4wODJsLTY1NC44Mi0uMTgzbS0uMDQzLjI4MWwtLjI2Ni0zNy42NTgiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48L2c+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQzOCA0MjIuNzUyaDY1NXYzNy41SDQzOHoiLz48cGF0aCBkPSJNNDM3LjMyIDQyMi43NTJsNjU2Ljc1OC0uMzQxbS0uNjYxLS43MmwtLjIzNyAzOS4xMTVtLjYzMy0uNDQybC02NTYuMjc0LjI1Nm0uNDk0LjkyM0w0MzggNDIxLjkxMW0tLjU1NC42MTZsNjU2LjA5Mi0uMjY4bS4xMjgtLjY5M2wtLjI1OCAzOC42NzRtLjUzMi4wNjVsLTY1NS43ODEuMjk3bS0uMDI0LjgxNmwtLjA0OC0zOC43OTEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNDM4IDU0NWg2NTV2MzcuNUg0Mzh6Ii8+PHBhdGggZD0iTTQzNy41MTYgNTQ1bDY1Ni40MjQuMzY0bS0uNjQ3LS42MjhsLS42MiAzNy44NjltLjMwMy0uMzcxbC02NTQuODQxLjQzOG0uMzA5Ljk5MWwtLjQ1NS0zOS42MjltLS4zNDguODA3bDY1NS43NjcuMzQzbS4wODctLjU3MmwtLjY5IDM3LjQ5N20uMjk2LjExM2wtNjU0LjU0My4zODdtLS4wMi45M2wtLjQ2NS0zOC42NjMiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNDM4IDYwNmg2NTV2MzcuNUg0Mzh6Ii8+PHBhdGggZD0iTTQzNy43MTIgNjA2bDY1Ni4wOS4wNjhtLS42NDgtLjUzNWwuMDIgMzguNjIybS43MTUtLjNsLTY1Ni45MDktLjM4bS44NTEuMzFsLjE3LTM4LjEyNm0tLjE2NC4xMjRsNjU1LjQ0Mi4wOG0uMDI4LS40NTVsLjAyIDM4LjMyMm0uNjg3LjAzNmwtNjU2LjA1Ni0uMzk4bS0uMDQuMjkybC4xNDMtMzcuNzg1IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLWRhc2hhcnJheT0iOC4wLDguMCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQzOCA0ODRoNjU1djM3LjVINDM4eiIvPjxwYXRoIGQ9Ik00MzcuMTU5IDQ4NGw2NTYuNTA1LS4yMjdtLS42MzUtLjQ0M2wtLjM2OSAzOS4xMjZtLjM5Mi0uOTc5bC02NTUuNDc3LS4xOTdtLjY2LjM3OGwtLjIzOC0zOC4xMjNtLS43MTMuMzE2bDY1NS44NjYtLjMxMW0uMTEtLjMzNGwtLjQxIDM4LjE0N20uMzI3LjA4MmwtNjU0LjgyLS4xODNtLS4wNDMuMjgxbC0uMjY2LTM3LjY1OCIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGZpbGw9IiM5NDExMDAiIGQ9Ik01NjkuNSA0MjIuNzUySDY0M3YzNy41aC03My41em0xOTkuNSAwaDMxLjV2MzcuNUg3Njl6TTg5OCA0MjNoMTQ5djM3LjVIODk4em0tMjE1IDYwLjg3Nmg2NHYzNy41aC02NHptMzE4IDBoMTAuNXYzNy41SDEwMDF6bS0xNTkgMGg4Ny41djM3LjVIODQyem0tNDA0IDYxLjM3MmgzOS41djM3LjVINDM4em04Ni0uMjQ4aDU3LjV2MzcuNUg1MjR6bTg2LS4yNDhoMTU5LjV2MzcuNUg2MTB6bTMwOSAwaDE4djM3LjVoLTE4em0tNDEzLTYwLjg3Nmg2LjV2MzcuNUg1MDZ6bTQ4MCA2MS4zNzJoNi41djM3LjVIOTg2em01NC41LS40OTZoNTIuNXYzNy41aC01Mi41eiIvPjxwYXRoIGQ9Ik00MDIuMzUgNDE5LjMwM2wuMjY1IDIyOC42Nm0uMTc4LTIyOS4wMzVsLjIzNSAyMjcuMTQzIiBtYXJrZXItZW5kPSJ1cmwoI2IpIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzc5Ljk3MiA0MDEpIiBmaWxsPSIjMDAwIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjEzIj5UaHJlYWRzPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzA4LjU3NiAzMzMuNSkiIGZpbGw9IiM5NDExMDAiPjx0c3BhbiBmb250LWZhbWlseT0iUm9ib3RvIENvbmRlbnNlZCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjQwMCIgeD0iMTcuNjIzIiB5PSIxMyI+QmxvY2tpbmcgSS9PPC90c3Bhbj4gPHRzcGFuIGZvbnQtZmFtaWx5PSJSb2JvdG8gQ29uZGVuc2VkIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNDAwIiB4PSIwIiB5PSIyOSI+KHdhc3RlZCBDUFUgdGltZSk8L3RzcGFuPjwvdGV4dD48cGF0aCBkPSJNNzAzLjU3NiAzNjcuMzgxYy0xMS4yNDkgNS41MzYtMjIuODQxIDEwLjE2Ny0zMi44MjEgMTYuNTgxLTE3LjEzMiAxMC43NjctMzAuNzEyIDIwLjgyNS0zOS42NDYgMjkuNzM1bTcyLjQ2Ny00Ni4zMTZjLTEwLjc0OSA1LjAzNi0yMi4zNDEgOS42NjctMzIuMzIxIDE2LjA4MS0xNy4xMzIgMTAuNzY3LTMwLjcxMiAyMC44MjUtMzkuNjQ2IDI5LjczNU03NzQuMzUzIDM3MC41YzEuNjg1IDQuNzY3IDQuNTcgOS40MjUgNS44MzYgMTYuMjkyIDEuNzQyIDguNDkzIDMuNDM4IDE1LjM5NyA0LjA0MSAyMy4wODhtLTkuODc3LTM5LjM4YzIuMTg1IDQuMjY3IDUuMDcgOC45MjUgNi4zMzYgMTUuNzkyIDEuNzQyIDguNDkzIDMuNDM4IDE1LjM5NyA0LjA0MSAyMy4wODhtMzEuOTE4LTQ5LjgyOWMzMi4zMyA1LjQ3MiA2Ni4wOTcgMTUuNjcgOTQuNjczIDI4LjE4NSAxOS4zODUgNy40NDIgMzIuOTA4IDE4Ljg3NyA0My4wMDEgMjUuOTcybS0xMzcuNjc0LTU0LjE1N2MzMi44MyA0Ljk3MiA2Ni41OTcgMTUuMTcgOTUuMTczIDI3LjY4NSAxOS4zODUgNy40NDIgMzIuOTA4IDE4Ljg3NyA0My4wMDEgMjUuOTcyIiBtYXJrZXItZW5kPSJ1cmwoI2MpIiBzdHJva2U9IiM5NDExMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjwvc3ZnPg&#x3D;&#x3D;">
<meta property="og:image" content="https:&#x2F;&#x2F;vertx.io&#x2F;_next&#x2F;static&#x2F;images&#x2F;event-loop-741b82e088447ba4062168b2ff60c7b3.svg">
<meta property="og:image" content="https:&#x2F;&#x2F;vertx.io&#x2F;_next&#x2F;static&#x2F;images&#x2F;async-f15f5a50778c4a3a4872777d5554e388.svg">
<meta property="og:image" content="http:&#x2F;&#x2F;nas.beritra.com:18081&#x2F;blog&#x2F;202108&#x2F;v2-c82beca9046448eadacd301be25958b3_1440w.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;xilidou.com&#x2F;images&#x2F;verticle-threading-config.png">
<meta property="og:image" content="https:&#x2F;&#x2F;xilidou.com&#x2F;images&#x2F;event-bus.png">
<meta property="article:published_time" content="2021-08-09T15:00:58.000Z">
<meta property="article:modified_time" content="2021-08-09T15:07:15.923Z">
<meta property="article:author" content="Beritra">
<meta property="article:tag" content="vertx">
<meta property="article:tag" content="响应式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image&#x2F;svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjI0NSAxNjQgNTAzIDE5MSIgd2lkdGg9IjUwMyIgaGVpZ2h0PSIxOTEiPjxkZWZzPjxtYXJrZXIgb3JpZW50PSJhdXRvIiBvdmVyZmxvdz0idmlzaWJsZSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBpZD0iYiIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB2aWV3Qm94PSItMSAtMyA3IDYiIG1hcmtlcldpZHRoPSI3IiBtYXJrZXJIZWlnaHQ9IjYiIGNvbG9yPSIjOTQyMDkyIj48cGF0aCBkPSJNNC44IDBIMG0wLTEuOEw0LjggMCAwIDEuOCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiLz48L21hcmtlcj48bWFya2VyIG9yaWVudD0iYXV0byIgb3ZlcmZsb3c9InZpc2libGUiIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCIgaWQ9ImMiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgdmlld0JveD0iLTEgLTMgNyA2IiBtYXJrZXJXaWR0aD0iNyIgbWFya2VySGVpZ2h0PSI2IiBjb2xvcj0iIzk0MjA5MiI+PHBhdGggZD0iTTQuOCAwSDBtMC0xLjhMNC44IDAgMCAxLjgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIi8+PC9tYXJrZXI+PGZpbHRlciBpZD0iYSIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIxOTQuNyIgeT0iMTQ0LjkiPjxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0iYmx1ciIgc3RkRGV2aWF0aW9uPSI1LjIzMiIvPjxmZU9mZnNldCBpbj0iYmx1ciIgcmVzdWx0PSJvZmZzZXQiIGR5PSIxIi8+PGZlRmxvb2QgZmxvb2QtY29sb3I9IiMwMDAiIGZsb29kLW9wYWNpdHk9Ii41IiByZXN1bHQ9ImZsb29kIi8+PGZlQ29tcG9zaXRlIGluPSJmbG9vZCIgaW4yPSJvZmZzZXQiIG9wZXJhdG9yPSJpbiIvPjwvZmlsdGVyPjwvZGVmcz48ZyBmaWxsPSJub25lIj48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00MDguNSAxOTUuNjI1SDU4MnYxMjguNUg0MDguNXoiLz48cGF0aCBkPSJNNDA3LjgyIDE5NS42MjZsMTc1LjI1OC0uMzQzbS0uNjY0LS43MmwtLjIzMiAxMzAuMTE2bS42MzItLjQ0M2wtMTc0Ljc3NS4yNThtLjQ5NC45MjJsLS4wMzMtMTMwLjYzMm0tLjU1NS42MTdsMTc0LjU5Mi0uMjdtLjEyNS0uNjkybC0uMjU1IDEyOS42NzNtLjUzMi4wNjVsLTE3NC4yODEuMjk4bS0uMDI1LjgxNmwtLjA0Ny0xMjkuNzkxIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI2MC41IDIxMS4yNWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik0yNjAuMDE2IDIxMS4yNDlsMTY3LjQyNC4zNjZtLS42NDYtLjYyOWwtLjYyMiAzNy44NjltLjMwNC0uMzcybC0xNjUuODQxLjQ0bS4zMDkuOTlsLS40NTUtMzkuNjI5bS0uMzQ4LjgwN2wxNjYuNzY3LjM0M20uMDg3LS41NzJsLS42OSAzNy40OTdtLjI5Ny4xMTJsLTE2NS41NDQuMzg4bS0uMDIuOTNsLS40NjUtMzguNjYzIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI2MC41IDI3MWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik0yNjAuMjEyIDI3MWwxNjcuMDkuMDY5bS0uNjQ4LS41MzZsLjAyIDM4LjYyMm0uNzE1LS4yOThsLTE2Ny45MDktLjM4M20uODUxLjMxMmwuMTctMzguMTI3bS0uMTY0LjEyNGwxNjYuNDQyLjA4bS4wMjktLjQ1NWwuMDIgMzguMzIybS42ODYuMDM4bC0xNjcuMDU2LS40bS0uMDQuMjkybC4xNDMtMzcuNzg1IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTU2Ni41IDIxMS4yNWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik01NjUuNjU5IDIxMS4yNTFsMTY3LjUwNS0uMjI5bS0uNjM1LS40NDJsLS4zNyAzOS4xMjZtLjM5My0uOTc4bC0xNjYuNDc3LS4xOTltLjY2LjM3OWwtLjIzOC0zOC4xMjNtLS43MTMuMzE2bDE2Ni44NjYtLjMxMW0uMTEtLjMzNGwtLjQxIDM4LjE0N20uMzI3LjA4MmwtMTY1LjgyLS4xODNtLS4wNDMuMjgxbC0uMjY2LTM3LjY1OCIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik01NjYuNSAyNzFoMTY2djM3LjVoLTE2NnoiLz48cGF0aCBkPSJNNTY1Ljg1NSAyNzAuOTk4bDE2Ny4xNy40ODFtLS42MzItLjM1MmwuMjc4IDM3Ljg4bS43OTQtLjkwOGwtMTY3Ljc5NC0uMDE1bS40NTcuNDQ2bC4zNzgtMzguMTJtLS41MjYuMzhsMTY2LjU0LjU1Mm0uMDU3LS4zNGwuMjk3IDM2Ljk3MW0uNzE2LjAwNmwtMTY3LjMzMi4wMzJtLS4wNTguMzkzbC4zMzYtMzcuNTMiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48L2c+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQwOC41IDE5NS42MjVINTgydjEyOC41SDQwOC41eiIvPjxwYXRoIGQ9Ik00MDcuODIgMTk1LjYyNmwxNzUuMjU4LS4zNDNtLS42NjQtLjcybC0uMjMyIDEzMC4xMTZtLjYzMi0uNDQzbC0xNzQuNzc1LjI1OG0uNDk0LjkyMmwtLjAzMy0xMzAuNjMybS0uNTU1LjYxN2wxNzQuNTkyLS4yN20uMTI1LS42OTJsLS4yNTUgMTI5LjY3M20uNTMyLjA2NWwtMTc0LjI4MS4yOThtLS4wMjUuODE2bC0uMDQ3LTEyOS43OTEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MTMuNSAyNTEuODc1KSIgZmlsbD0iIzAwMCI+PHRzcGFuIGZvbnQtZmFtaWx5PSJSb2JvdG8gQ29uZGVuc2VkIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNDAwIiB4PSIzOC41NCIgeT0iMTMiPlNoYXJlZCBtZW1vcnk8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjYwLjUgMjExLjI1aDE2NnYzNy41aC0xNjZ6Ii8+PHBhdGggZD0iTTI2MC4wMTYgMjExLjI0OWwxNjcuNDI0LjM2Nm0tLjY0Ni0uNjI5bC0uNjIyIDM3Ljg2OW0uMzA0LS4zNzJsLTE2NS44NDEuNDRtLjMwOS45OWwtLjQ1NS0zOS42MjltLS4zNDguODA3bDE2Ni43NjcuMzQzbS4wODctLjU3MmwtLjY5IDM3LjQ5N20uMjk3LjExMmwtMTY1LjU0NC4zODhtLS4wMi45M2wtLjQ2NS0zOC42NjMiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNjUuNSAyMjIpIiBmaWxsPSIjMDAwIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjUzLjc1IiB5PSIxMyI+VGhyZWFkIDE8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjYwLjUgMjcxaDE2NnYzNy41aC0xNjZ6Ii8+PHBhdGggZD0iTTI2MC4yMTIgMjcxbDE2Ny4wOS4wNjltLS42NDgtLjUzNmwuMDIgMzguNjIybS43MTUtLjI5OGwtMTY3LjkwOS0uMzgzbS44NTEuMzEybC4xNy0zOC4xMjdtLS4xNjQuMTI0bDE2Ni40NDIuMDhtLjAyOS0uNDU1bC4wMiAzOC4zMjJtLjY4Ni4wMzhsLTE2Ny4wNTYtLjRtLS4wNC4yOTJsLjE0My0zNy43ODUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNjUuNSAyODEuNzUpIiBmaWxsPSIjMDAwIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjUzLjc1IiB5PSIxMyI+VGhyZWFkIDI8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNTY2LjUgMjExLjI1aDE2NnYzNy41aC0xNjZ6Ii8+PHBhdGggZD0iTTU2NS42NTkgMjExLjI1MWwxNjcuNTA1LS4yMjltLS42MzUtLjQ0MmwtLjM3IDM5LjEyNm0uMzkzLS45NzhsLTE2Ni40NzctLjE5OW0uNjYuMzc5bC0uMjM4LTM4LjEyM20tLjcxMy4zMTZsMTY2Ljg2Ni0uMzExbS4xMS0uMzM0bC0uNDEgMzguMTQ3bS4zMjcuMDgybC0xNjUuODItLjE4M20tLjA0My4yODFsLS4yNjYtMzcuNjU4IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcxLjUgMjIyKSIgZmlsbD0iIzAwMCI+PHRzcGFuIGZvbnQtZmFtaWx5PSJSb2JvdG8gQ29uZGVuc2VkIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNDAwIiB4PSI1My43NSIgeT0iMTMiPlRocmVhZCAzPC90c3Bhbj48L3RleHQ+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTU2Ni41IDI3MWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik01NjUuODU1IDI3MC45OThsMTY3LjE3LjQ4MW0tLjYzMi0uMzUybC4yNzggMzcuODhtLjc5NC0uOTA4bC0xNjcuNzk0LS4wMTVtLjQ1Ny40NDZsLjM3OC0zOC4xMm0tLjUyNi4zOGwxNjYuNTQuNTUybS4wNTctLjM0bC4yOTcgMzYuOTcxbS43MTYuMDA2bC0xNjcuMzMyLjAzMm0tLjA1OC4zOTNsLjMzNi0zNy41MyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDU3MS41IDI4MS43NSkiIGZpbGw9IiMwMDAiPjx0c3BhbiBmb250LWZhbWlseT0iUm9ib3RvIENvbmRlbnNlZCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjQwMCIgeD0iNTMuNzUiIHk9IjEzIj5UaHJlYWQgNDwvdHNwYW4+PC90ZXh0PjxwYXRoIGQ9Ik0yOTYuMzAxIDMzMy4xMzZjLjE5OS0uODc3IDIuNjUtMTguMTM4IDkuMTk5LTE4Ljk0OCA2LjI4OC0xLjE0MSA1Ljg2MSAxMi44ODUgMTUgMTQuMDcgOS4xNy0uMjc1IDYuNTAzLTExLjc4NyAxNi0xMiA5LjQ3LjM0MiA2LjYzNyAxMi42MiAxNSAxMyA4LjkxLS44NjUgNC45NTYtMTUuODg0IDE3LTEzIDUuMzAzIDEuMzU5IDExLjAyNCA2LjcyNyAxNC42OCAxMS4zNzltLTg2Ljg3OSA1LjVjLjY5OS0xLjM3OCAzLjE1LTE4LjY0IDkuNjk5LTE5LjQ1IDYuMjg4LTEuMTQgNS44NjEgMTIuODg2IDE1IDE0LjA3MiA5LjE3LS4yNzYgNi41MDMtMTEuNzg4IDE2LTEyIDkuNDcuMzQgNi42MzcgMTIuNjIgMTUgMTMgOC45MS0uODY2IDQuOTU2LTE1Ljg4NSAxNy0xMyA1LjMwMyAxLjM1OCAxMS4wMjQgNi43MjYgMTQuNjggMTEuMzc4bS04Ny4zMzYtMTM3LjdjLjE1Ni42ODggMi4yIDE2Ljk0MiA5LjE1NiAxOC43NTkgNi45MyAxLjExIDYuMjQxLTEzLjIxIDE1LTE0LjA3MSA4LjUwNS4wOTQgNy41OTUgMTIuNjEzIDE2IDEyIDguMDk4LjQ3NyA2LjI4Mi0xMi4zNzEgMTUtMTMgOS41OTMuNDc1IDYuNDEgMTUuNDIxIDE3IDEzIDUuMzY2LS45MTYgMTEuMTU1LTYuNzEzIDE0LjY4LTExLjM3OG0tODYuODM2LTUuMzFjLjY1Ni4xODggMi43IDE2LjQ0MiA5LjY1NiAxOC4yNTkgNi45MyAxLjExIDYuMjQxLTEzLjIxIDE1LTE0LjA3MSA4LjUwNS4wOTQgNy41OTUgMTIuNjEzIDE2IDEyIDguMDk4LjQ3NyA2LjI4Mi0xMi4zNzEgMTUtMTMgOS41OTMuNDc1IDYuNDEgMTUuNDIxIDE3IDEzIDUuMzY2LS45MTYgMTEuMTU1LTYuNzEzIDE0LjY4LTExLjM3OG0yMTguNzA3LTQuNjIxYy4xMTMuNDk5IDEuNzUgMTcuNzcxIDkuMTEzIDE4LjU3IDYuMTkzIDEuMDkzIDYuNjIyLTE0LjEgMTUtMTQuMDcxIDkuNTk5LS4xMjMgNi45MjkgMTIuNDQ2IDE2IDEyIDguNDg0LS41NzcgNS45MjctMTMuMTc1IDE1LTEzIDguNDYzLjAwMyA1LjU5NSAxNS42MjcgMTcgMTMgNS40MjktLjczNCA5Ljk5NS02LjExOCAxNC42OC0xMS4zNzhtLTg2Ljc5My01LjEyMWMuNjEzLS4wMDEgMi4yNSAxNy4yNzEgOS42MTMgMTguMDcgNi4xOTMgMS4wOTMgNi42MjItMTQuMSAxNS0xNC4wNzEgOS41OTktLjEyMyA2LjkyOSAxMi40NDYgMTYgMTIgOC40ODQtLjU3NyA1LjkyNy0xMy4xNzUgMTUtMTMgOC40NjMuMDAzIDUuNTk1IDE1LjYyNyAxNyAxMyA1LjQyOS0uNzM0IDkuOTk1LTYuMTE4IDE0LjY4LTExLjM3OCIgbWFya2VyLWVuZD0idXJsKCNiKSIgc3Ryb2tlPSIjOTQyMDkyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGQ9Ik02MDIuMTg0IDMzMy42NTRjLjMxNi0xLjM5NSAyLjExLTE3LjcwMiA5LjMxNi0xOS40NjYgNi43NC0xLjIyMiA2LjAwMiAxMy43MjUgMTUgMTQuMDcgOS4zNjEuNCA2LjY4OS0xMi42MiAxNi0xMiA5LjY0Mi4zNDIgNi42NzMgMTIuMjI2IDE1IDEzIDguNy40IDUuNDE5LTE0Ljg1MyAxNy0xMyA1LjYxNyAxLjE3NCAxMC4zODYgNS44MzMgMTQuNjggMTEuMzc5bS04Ni45OTYgNi4wMTdjLjgxNi0xLjg5NSAyLjYxLTE4LjIwMiA5LjgxNi0xOS45NjYgNi43NC0xLjIyMiA2LjAwMiAxMy43MjUgMTUgMTQuMDcgOS4zNjEuNCA2LjY4OS0xMi42MiAxNi0xMiA5LjY0Mi4zNDIgNi42NzMgMTIuMjI2IDE1IDEzIDguNy40IDUuNDE5LTE0Ljg1MyAxNy0xMyA1LjYxNyAxLjE3NCAxMC4zODYgNS44MzMgMTQuNjggMTEuMzc5IiBtYXJrZXItZW5kPSJ1cmwoI2MpIiBzdHJva2U9IiM5NDIwOTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzE2LjY2NCAxNjkpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICMxPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzE2LjY2NCAzMzUuNzUpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICMyPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjIyLjY2NCAxNjkpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICMzPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjIyLjY2NCAzMzUuNzUpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICM0PC90c3Bhbj48L3RleHQ+PC9nPjwvc3ZnPg&#x3D;&#x3D;">

<link rel="canonical" href="http://beritra.github.com/2021/08/09/Vertx%E5%92%8C%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Vertx和响应式编程 | Beritra</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Beritra</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Blogs</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://beritra.github.com/2021/08/09/Vertx%E5%92%8C%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avator.jpg">
      <meta itemprop="name" content="Beritra">
      <meta itemprop="description" content="Beritra's Blogs">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Beritra">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Vertx和响应式编程
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-09 23:00:58 / 修改时间：23:07:15" itemprop="dateCreated datePublished" datetime="2021-08-09T23:00:58+08:00">2021-08-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vertx/" itemprop="url" rel="index">
                    <span itemprop="name">vertx</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>10k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>17 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>今天了解下听说了好久，但是没怎么用过的东西。</p>
<a id="more"></a>

<h2 id="响应式介绍"><a href="#响应式介绍" class="headerlink" title="响应式介绍"></a>响应式介绍</h2><p>可能有的同学对 Vertx 和响应式还不熟悉，按照惯例，先上定义。</p>
<blockquote>
<p>响应式编程（Reactive Programming）：</p>
<p>在<a href="https://zh.wikipedia.org/wiki/计算_(计算机科学)" target="_blank" rel="noopener">计算</a>中，<strong>响应式编程</strong>或<strong>反应式编程</strong>（英语：Reactive programming）是一种面向数据流和变化传播的<a href="https://zh.wikipedia.org/wiki/声明式编程" target="_blank" rel="noopener">声明式</a><a href="https://zh.wikipedia.org/wiki/编程范式" target="_blank" rel="noopener">编程范式</a>。这意味着可以在编程语言中很方便地表达静态或动态的数据流，而相关的计算模型会自动将变化的值通过数据流进行传播。</p>
</blockquote>
<p>好，估计还是不懂，Wiki 上的定义一向晦涩难懂。</p>
<p>”响应式“这个概念其实是编程范式（Programming paradigm）里的“声明式编程”的子类，我们不妨对比一下，才能更好地理解什么才算是响应式编程。</p>
<ul>
<li>过程化/命令式编程：命令式编程的主要思想是关注计算机执行的步骤， 即一步一步告诉计算机先做什么再做什么。</li>
<li>声明式编程：声明式编程是以数据结构的形式来表达程序执行的逻辑。 它的主要思想是告诉计算机应该做什么，但不指定具体要怎么做。</li>
</ul>
<p>比如我们想在一个数字集合中筛选数字大于 6 的，对于命令式，可能是这么做：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> num=<span class="number">0</span>;i&lt;list.size();i++)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  <span class="keyword">if</span> (num &gt; <span class="number">6</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> num;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">  &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>而声明式编程中最典型的就是 SQL，我们想筛选同样的数据，对于 SQL 来说可能是下面这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">SELECT num FROM list where num &gt; 6 limit 1;</span></pre></td></tr></table></figure>

<p>除了 SQL，网页编程中用到的 HTML 和 CSS 也都属于声明式编程。</p>
<p>命令式编程和声明式编程起源的不同决定这两大类范式代表着迥然不同的编程理念和风格：命令式编程是行动导向（ Action-Oriented ）的，因而算法是显性而目标是隐性的；声明式编程是目标驱动（ Goal-Driven ）的，因而目标是显性而算法是隐性的。</p>
<p>明确什么是“声明式”之后，我们在看什么叫”面向数据流(data stream)和变化传播(propagation of change)“。</p>
<p>与传统的处理方式相比，响应式能够基于数据流中的事件进行反应处理。举个例子：<code>a+b=c</code>的场景，在传统编程方式下如果 a、b 发生变化，那么我们需要重新计算 a+b 来得到 c 的新值。而反应式编程中，我们不需要重新计算，a、b 的变化事件会触发 c 的值自动更新。这种方式类似于我们在消息中间件中常见的发布/订阅模式或者观察者模式。由流发布事件，而我们的代码逻辑作为订阅方基于事件进行处理，并且是异步处理的。</p>
<blockquote>
<p>观察者模式，或者可以叫发布-订阅模式，定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。</p>
</blockquote>
<p>反应式编程中，最基本的处理单元是事件流(事件流是不可变的，对流进行操作只会返回新的流)中的事件。流中的事件包括正常事件(对象代表的数据、数据流结束标识)和异常事件(异常对象，例如 Exception)。同时，只有当订阅者第一次发布者，发布者发布的事件流才会被消费，后续的订阅者只能从订阅点开始消费，但是我们可以通过背压、流控等方式控制消费。</p>
<p>常用的反应式编程实现类库包括：Reactor、RxJava 2、Akka Streams、Vert.x 以及 Ratpack 等等。</p>
<h2 id="Vert-x"><a href="#Vert-x" class="headerlink" title="Vert.x"></a>Vert.x</h2><blockquote>
<p>一个基于 JVM、轻量级、高性能的应用平台。</p>
</blockquote>
<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>相信任何一个程序猿，对”高性能“的追求永远都不会停歇。Vertx 既然自称高性能，那么有多高的性能？参见下面这个 Benchmark。</p>
<p><a href="https://www.techempower.com/benchmarks/#section=data-r20&hw=ph&test=db" target="_blank" rel="noopener">Web Framework Benchmarks</a></p>
<p>这个测试非常全，基本覆盖了常见语言的常见框架，并且分为多种场景，每隔半年左右重新测试一遍更新数据。可以看到 Vertx 在 JVM 语言里面性能排名还是非常靠前的。但是前几名还是还是 C++、Rust 的天下。</p>
<p>![image-20210602092204587](/Users/zhuzheng/Library/Application Support/typora-user-images/image-20210602092204587.png)</p>
<p>作为对比，Spring 大概在这个位置：</p>
<p>![image-20210602094525978](/Users/zhuzheng/Library/Application Support/typora-user-images/image-20210602094525978.png)</p>
<p>当然，Vertx 不是一个大而全的框架，和 Spring 的定位不一样也不好直接对比。</p>
<p>Vertx 有如下几个特性:</p>
<ul>
<li>轻量级，核心包大小只有 650kB。</li>
<li>速度快，基于全异步的 Netty，Netty 性能很强大家应该都了解，Vertx 基于 Netty 做了很多封装，保持高性能的同时增加了易用性。</li>
<li>同时支持多种编程语言，比如 Java，JavaScript，Groovy，Ruby，Ceylon，Scala 和 Kotlin。</li>
<li>极好的分布式开发支持。</li>
<li>模块化。</li>
</ul>
<p>不讲这些比较虚的，我们直接来看下 Vertx 的理念和玩法。</p>
<p><a href="https://vertx.io/introduction-to-vertx-and-reactive/" target="_blank" rel="noopener">官方文档的 Introduction</a> 其实就有比较详细的介绍，我在根据我的理解再复述补充一遍：</p>
<h4 id="最开始的多线程"><a href="#最开始的多线程" class="headerlink" title="最开始的多线程"></a>最开始的多线程</h4><p>解决并发问题最经典的用法就是用多线程，多个线程可以存在于单个进程中，执行并发工作，并共享相同的内存空间。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjI0NSAxNjQgNTAzIDE5MSIgd2lkdGg9IjUwMyIgaGVpZ2h0PSIxOTEiPjxkZWZzPjxtYXJrZXIgb3JpZW50PSJhdXRvIiBvdmVyZmxvdz0idmlzaWJsZSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBpZD0iYiIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB2aWV3Qm94PSItMSAtMyA3IDYiIG1hcmtlcldpZHRoPSI3IiBtYXJrZXJIZWlnaHQ9IjYiIGNvbG9yPSIjOTQyMDkyIj48cGF0aCBkPSJNNC44IDBIMG0wLTEuOEw0LjggMCAwIDEuOCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiLz48L21hcmtlcj48bWFya2VyIG9yaWVudD0iYXV0byIgb3ZlcmZsb3c9InZpc2libGUiIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCIgaWQ9ImMiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgdmlld0JveD0iLTEgLTMgNyA2IiBtYXJrZXJXaWR0aD0iNyIgbWFya2VySGVpZ2h0PSI2IiBjb2xvcj0iIzk0MjA5MiI+PHBhdGggZD0iTTQuOCAwSDBtMC0xLjhMNC44IDAgMCAxLjgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIi8+PC9tYXJrZXI+PGZpbHRlciBpZD0iYSIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIxOTQuNyIgeT0iMTQ0LjkiPjxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0iYmx1ciIgc3RkRGV2aWF0aW9uPSI1LjIzMiIvPjxmZU9mZnNldCBpbj0iYmx1ciIgcmVzdWx0PSJvZmZzZXQiIGR5PSIxIi8+PGZlRmxvb2QgZmxvb2QtY29sb3I9IiMwMDAiIGZsb29kLW9wYWNpdHk9Ii41IiByZXN1bHQ9ImZsb29kIi8+PGZlQ29tcG9zaXRlIGluPSJmbG9vZCIgaW4yPSJvZmZzZXQiIG9wZXJhdG9yPSJpbiIvPjwvZmlsdGVyPjwvZGVmcz48ZyBmaWxsPSJub25lIj48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00MDguNSAxOTUuNjI1SDU4MnYxMjguNUg0MDguNXoiLz48cGF0aCBkPSJNNDA3LjgyIDE5NS42MjZsMTc1LjI1OC0uMzQzbS0uNjY0LS43MmwtLjIzMiAxMzAuMTE2bS42MzItLjQ0M2wtMTc0Ljc3NS4yNThtLjQ5NC45MjJsLS4wMzMtMTMwLjYzMm0tLjU1NS42MTdsMTc0LjU5Mi0uMjdtLjEyNS0uNjkybC0uMjU1IDEyOS42NzNtLjUzMi4wNjVsLTE3NC4yODEuMjk4bS0uMDI1LjgxNmwtLjA0Ny0xMjkuNzkxIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI2MC41IDIxMS4yNWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik0yNjAuMDE2IDIxMS4yNDlsMTY3LjQyNC4zNjZtLS42NDYtLjYyOWwtLjYyMiAzNy44NjltLjMwNC0uMzcybC0xNjUuODQxLjQ0bS4zMDkuOTlsLS40NTUtMzkuNjI5bS0uMzQ4LjgwN2wxNjYuNzY3LjM0M20uMDg3LS41NzJsLS42OSAzNy40OTdtLjI5Ny4xMTJsLTE2NS41NDQuMzg4bS0uMDIuOTNsLS40NjUtMzguNjYzIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI2MC41IDI3MWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik0yNjAuMjEyIDI3MWwxNjcuMDkuMDY5bS0uNjQ4LS41MzZsLjAyIDM4LjYyMm0uNzE1LS4yOThsLTE2Ny45MDktLjM4M20uODUxLjMxMmwuMTctMzguMTI3bS0uMTY0LjEyNGwxNjYuNDQyLjA4bS4wMjktLjQ1NWwuMDIgMzguMzIybS42ODYuMDM4bC0xNjcuMDU2LS40bS0uMDQuMjkybC4xNDMtMzcuNzg1IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTU2Ni41IDIxMS4yNWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik01NjUuNjU5IDIxMS4yNTFsMTY3LjUwNS0uMjI5bS0uNjM1LS40NDJsLS4zNyAzOS4xMjZtLjM5My0uOTc4bC0xNjYuNDc3LS4xOTltLjY2LjM3OWwtLjIzOC0zOC4xMjNtLS43MTMuMzE2bDE2Ni44NjYtLjMxMW0uMTEtLjMzNGwtLjQxIDM4LjE0N20uMzI3LjA4MmwtMTY1LjgyLS4xODNtLS4wNDMuMjgxbC0uMjY2LTM3LjY1OCIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik01NjYuNSAyNzFoMTY2djM3LjVoLTE2NnoiLz48cGF0aCBkPSJNNTY1Ljg1NSAyNzAuOTk4bDE2Ny4xNy40ODFtLS42MzItLjM1MmwuMjc4IDM3Ljg4bS43OTQtLjkwOGwtMTY3Ljc5NC0uMDE1bS40NTcuNDQ2bC4zNzgtMzguMTJtLS41MjYuMzhsMTY2LjU0LjU1Mm0uMDU3LS4zNGwuMjk3IDM2Ljk3MW0uNzE2LjAwNmwtMTY3LjMzMi4wMzJtLS4wNTguMzkzbC4zMzYtMzcuNTMiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48L2c+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQwOC41IDE5NS42MjVINTgydjEyOC41SDQwOC41eiIvPjxwYXRoIGQ9Ik00MDcuODIgMTk1LjYyNmwxNzUuMjU4LS4zNDNtLS42NjQtLjcybC0uMjMyIDEzMC4xMTZtLjYzMi0uNDQzbC0xNzQuNzc1LjI1OG0uNDk0LjkyMmwtLjAzMy0xMzAuNjMybS0uNTU1LjYxN2wxNzQuNTkyLS4yN20uMTI1LS42OTJsLS4yNTUgMTI5LjY3M20uNTMyLjA2NWwtMTc0LjI4MS4yOThtLS4wMjUuODE2bC0uMDQ3LTEyOS43OTEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MTMuNSAyNTEuODc1KSIgZmlsbD0iIzAwMCI+PHRzcGFuIGZvbnQtZmFtaWx5PSJSb2JvdG8gQ29uZGVuc2VkIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNDAwIiB4PSIzOC41NCIgeT0iMTMiPlNoYXJlZCBtZW1vcnk8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjYwLjUgMjExLjI1aDE2NnYzNy41aC0xNjZ6Ii8+PHBhdGggZD0iTTI2MC4wMTYgMjExLjI0OWwxNjcuNDI0LjM2Nm0tLjY0Ni0uNjI5bC0uNjIyIDM3Ljg2OW0uMzA0LS4zNzJsLTE2NS44NDEuNDRtLjMwOS45OWwtLjQ1NS0zOS42MjltLS4zNDguODA3bDE2Ni43NjcuMzQzbS4wODctLjU3MmwtLjY5IDM3LjQ5N20uMjk3LjExMmwtMTY1LjU0NC4zODhtLS4wMi45M2wtLjQ2NS0zOC42NjMiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNjUuNSAyMjIpIiBmaWxsPSIjMDAwIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjUzLjc1IiB5PSIxMyI+VGhyZWFkIDE8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjYwLjUgMjcxaDE2NnYzNy41aC0xNjZ6Ii8+PHBhdGggZD0iTTI2MC4yMTIgMjcxbDE2Ny4wOS4wNjltLS42NDgtLjUzNmwuMDIgMzguNjIybS43MTUtLjI5OGwtMTY3LjkwOS0uMzgzbS44NTEuMzEybC4xNy0zOC4xMjdtLS4xNjQuMTI0bDE2Ni40NDIuMDhtLjAyOS0uNDU1bC4wMiAzOC4zMjJtLjY4Ni4wMzhsLTE2Ny4wNTYtLjRtLS4wNC4yOTJsLjE0My0zNy43ODUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNjUuNSAyODEuNzUpIiBmaWxsPSIjMDAwIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjUzLjc1IiB5PSIxMyI+VGhyZWFkIDI8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNTY2LjUgMjExLjI1aDE2NnYzNy41aC0xNjZ6Ii8+PHBhdGggZD0iTTU2NS42NTkgMjExLjI1MWwxNjcuNTA1LS4yMjltLS42MzUtLjQ0MmwtLjM3IDM5LjEyNm0uMzkzLS45NzhsLTE2Ni40NzctLjE5OW0uNjYuMzc5bC0uMjM4LTM4LjEyM20tLjcxMy4zMTZsMTY2Ljg2Ni0uMzExbS4xMS0uMzM0bC0uNDEgMzguMTQ3bS4zMjcuMDgybC0xNjUuODItLjE4M20tLjA0My4yODFsLS4yNjYtMzcuNjU4IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcxLjUgMjIyKSIgZmlsbD0iIzAwMCI+PHRzcGFuIGZvbnQtZmFtaWx5PSJSb2JvdG8gQ29uZGVuc2VkIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNDAwIiB4PSI1My43NSIgeT0iMTMiPlRocmVhZCAzPC90c3Bhbj48L3RleHQ+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTU2Ni41IDI3MWgxNjZ2MzcuNWgtMTY2eiIvPjxwYXRoIGQ9Ik01NjUuODU1IDI3MC45OThsMTY3LjE3LjQ4MW0tLjYzMi0uMzUybC4yNzggMzcuODhtLjc5NC0uOTA4bC0xNjcuNzk0LS4wMTVtLjQ1Ny40NDZsLjM3OC0zOC4xMm0tLjUyNi4zOGwxNjYuNTQuNTUybS4wNTctLjM0bC4yOTcgMzYuOTcxbS43MTYuMDA2bC0xNjcuMzMyLjAzMm0tLjA1OC4zOTNsLjMzNi0zNy41MyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDU3MS41IDI4MS43NSkiIGZpbGw9IiMwMDAiPjx0c3BhbiBmb250LWZhbWlseT0iUm9ib3RvIENvbmRlbnNlZCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjQwMCIgeD0iNTMuNzUiIHk9IjEzIj5UaHJlYWQgNDwvdHNwYW4+PC90ZXh0PjxwYXRoIGQ9Ik0yOTYuMzAxIDMzMy4xMzZjLjE5OS0uODc3IDIuNjUtMTguMTM4IDkuMTk5LTE4Ljk0OCA2LjI4OC0xLjE0MSA1Ljg2MSAxMi44ODUgMTUgMTQuMDcgOS4xNy0uMjc1IDYuNTAzLTExLjc4NyAxNi0xMiA5LjQ3LjM0MiA2LjYzNyAxMi42MiAxNSAxMyA4LjkxLS44NjUgNC45NTYtMTUuODg0IDE3LTEzIDUuMzAzIDEuMzU5IDExLjAyNCA2LjcyNyAxNC42OCAxMS4zNzltLTg2Ljg3OSA1LjVjLjY5OS0xLjM3OCAzLjE1LTE4LjY0IDkuNjk5LTE5LjQ1IDYuMjg4LTEuMTQgNS44NjEgMTIuODg2IDE1IDE0LjA3MiA5LjE3LS4yNzYgNi41MDMtMTEuNzg4IDE2LTEyIDkuNDcuMzQgNi42MzcgMTIuNjIgMTUgMTMgOC45MS0uODY2IDQuOTU2LTE1Ljg4NSAxNy0xMyA1LjMwMyAxLjM1OCAxMS4wMjQgNi43MjYgMTQuNjggMTEuMzc4bS04Ny4zMzYtMTM3LjdjLjE1Ni42ODggMi4yIDE2Ljk0MiA5LjE1NiAxOC43NTkgNi45MyAxLjExIDYuMjQxLTEzLjIxIDE1LTE0LjA3MSA4LjUwNS4wOTQgNy41OTUgMTIuNjEzIDE2IDEyIDguMDk4LjQ3NyA2LjI4Mi0xMi4zNzEgMTUtMTMgOS41OTMuNDc1IDYuNDEgMTUuNDIxIDE3IDEzIDUuMzY2LS45MTYgMTEuMTU1LTYuNzEzIDE0LjY4LTExLjM3OG0tODYuODM2LTUuMzFjLjY1Ni4xODggMi43IDE2LjQ0MiA5LjY1NiAxOC4yNTkgNi45MyAxLjExIDYuMjQxLTEzLjIxIDE1LTE0LjA3MSA4LjUwNS4wOTQgNy41OTUgMTIuNjEzIDE2IDEyIDguMDk4LjQ3NyA2LjI4Mi0xMi4zNzEgMTUtMTMgOS41OTMuNDc1IDYuNDEgMTUuNDIxIDE3IDEzIDUuMzY2LS45MTYgMTEuMTU1LTYuNzEzIDE0LjY4LTExLjM3OG0yMTguNzA3LTQuNjIxYy4xMTMuNDk5IDEuNzUgMTcuNzcxIDkuMTEzIDE4LjU3IDYuMTkzIDEuMDkzIDYuNjIyLTE0LjEgMTUtMTQuMDcxIDkuNTk5LS4xMjMgNi45MjkgMTIuNDQ2IDE2IDEyIDguNDg0LS41NzcgNS45MjctMTMuMTc1IDE1LTEzIDguNDYzLjAwMyA1LjU5NSAxNS42MjcgMTcgMTMgNS40MjktLjczNCA5Ljk5NS02LjExOCAxNC42OC0xMS4zNzhtLTg2Ljc5My01LjEyMWMuNjEzLS4wMDEgMi4yNSAxNy4yNzEgOS42MTMgMTguMDcgNi4xOTMgMS4wOTMgNi42MjItMTQuMSAxNS0xNC4wNzEgOS41OTktLjEyMyA2LjkyOSAxMi40NDYgMTYgMTIgOC40ODQtLjU3NyA1LjkyNy0xMy4xNzUgMTUtMTMgOC40NjMuMDAzIDUuNTk1IDE1LjYyNyAxNyAxMyA1LjQyOS0uNzM0IDkuOTk1LTYuMTE4IDE0LjY4LTExLjM3OCIgbWFya2VyLWVuZD0idXJsKCNiKSIgc3Ryb2tlPSIjOTQyMDkyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGQ9Ik02MDIuMTg0IDMzMy42NTRjLjMxNi0xLjM5NSAyLjExLTE3LjcwMiA5LjMxNi0xOS40NjYgNi43NC0xLjIyMiA2LjAwMiAxMy43MjUgMTUgMTQuMDcgOS4zNjEuNCA2LjY4OS0xMi42MiAxNi0xMiA5LjY0Mi4zNDIgNi42NzMgMTIuMjI2IDE1IDEzIDguNy40IDUuNDE5LTE0Ljg1MyAxNy0xMyA1LjYxNyAxLjE3NCAxMC4zODYgNS44MzMgMTQuNjggMTEuMzc5bS04Ni45OTYgNi4wMTdjLjgxNi0xLjg5NSAyLjYxLTE4LjIwMiA5LjgxNi0xOS45NjYgNi43NC0xLjIyMiA2LjAwMiAxMy43MjUgMTUgMTQuMDcgOS4zNjEuNCA2LjY4OS0xMi42MiAxNi0xMiA5LjY0Mi4zNDIgNi42NzMgMTIuMjI2IDE1IDEzIDguNy40IDUuNDE5LTE0Ljg1MyAxNy0xMyA1LjYxNyAxLjE3NCAxMC4zODYgNS44MzMgMTQuNjggMTEuMzc5IiBtYXJrZXItZW5kPSJ1cmwoI2MpIiBzdHJva2U9IiM5NDIwOTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzE2LjY2NCAxNjkpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICMxPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzE2LjY2NCAzMzUuNzUpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICMyPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjIyLjY2NCAxNjkpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICMzPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjIyLjY2NCAzMzUuNzUpIiBmaWxsPSIjOTQyMDkyIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjExIj5SZXF1ZXN0ICM0PC90c3Bhbj48L3RleHQ+PC9nPjwvc3ZnPg==" alt="Threads"></p>
<p>大多数应用程序和服务开发框架都是基于这种多线程模式。表面上看，每个连接有一个线程的模式是很让人放心，因为开发人员可以依靠传统的命令式代码。但是实际上你还是要自己去规避在内存访问方面的风险。</p>
<h4 id="多线程简单但是受限"><a href="#多线程简单但是受限" class="headerlink" title="多线程简单但是受限"></a>多线程简单但是受限</h4><p>当工作负荷增长到超过中等工作负荷时会发生什么？(比如C10k问题)</p>
<p>答案很简单：你的操作系统内核开始受到影响，每次请求期间就有太多的上下文切换。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjM3NCAzMjggNzM1IDMzNSIgd2lkdGg9IjczNSIgaGVpZ2h0PSIzMzUiPjxkZWZzPjxtYXJrZXIgb3JpZW50PSJhdXRvIiBvdmVyZmxvdz0idmlzaWJsZSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBpZD0iYiIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB2aWV3Qm94PSItMSAtMyA2IDYiIG1hcmtlcldpZHRoPSI2IiBtYXJrZXJIZWlnaHQ9IjYiIGNvbG9yPSIjMDAwIj48cGF0aCBkPSJNMy43MzMgMEwwLTEuNHYyLjh6IiBmaWxsPSJjdXJyZW50Q29sb3IiIHN0cm9rZT0iY3VycmVudENvbG9yIi8+PC9tYXJrZXI+PG1hcmtlciBvcmllbnQ9ImF1dG8iIG92ZXJmbG93PSJ2aXNpYmxlIiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiIGlkPSJjIiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHZpZXdCb3g9Ii0xIC0zIDcgNiIgbWFya2VyV2lkdGg9IjciIG1hcmtlckhlaWdodD0iNiIgY29sb3I9IiM5NDExMDAiPjxwYXRoIGQ9Ik00LjggMEgwbTAtMS44TDQuOCAwIDAgMS44IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIvPjwvbWFya2VyPjxmaWx0ZXIgaWQ9ImEiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMzAwLjUiIHk9IjI5NC41Ij48ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9ImJsdXIiIHN0ZERldmlhdGlvbj0iNS4yMzIiLz48ZmVPZmZzZXQgaW49ImJsdXIiIHJlc3VsdD0ib2Zmc2V0IiBkeT0iMSIvPjxmZUZsb29kIGZsb29kLWNvbG9yPSIjMDAwIiBmbG9vZC1vcGFjaXR5PSIuNSIgcmVzdWx0PSJmbG9vZCIvPjxmZUNvbXBvc2l0ZSBpbj0iZmxvb2QiIGluMj0ib2Zmc2V0IiBvcGVyYXRvcj0iaW4iLz48L2ZpbHRlcj48L2RlZnM+PGcgZmlsbD0ibm9uZSI+PGcgZmlsdGVyPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNDM4IDQyMi43NTJoNjU1djM3LjVINDM4eiIvPjxwYXRoIGQ9Ik00MzcuMzIgNDIyLjc1Mmw2NTYuNzU4LS4zNDFtLS42NjEtLjcybC0uMjM3IDM5LjExNW0uNjMzLS40NDJsLTY1Ni4yNzQuMjU2bS40OTQuOTIzTDQzOCA0MjEuOTExbS0uNTU0LjYxNmw2NTYuMDkyLS4yNjhtLjEyOC0uNjkzbC0uMjU4IDM4LjY3NG0uNTMyLjA2NWwtNjU1Ljc4MS4yOTdtLS4wMjQuODE2bC0uMDQ4LTM4Ljc5MSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00MzggNTQ1aDY1NXYzNy41SDQzOHoiLz48cGF0aCBkPSJNNDM3LjUxNiA1NDVsNjU2LjQyNC4zNjRtLS42NDctLjYyOGwtLjYyIDM3Ljg2OW0uMzAzLS4zNzFsLTY1NC44NDEuNDM4bS4zMDkuOTkxbC0uNDU1LTM5LjYyOW0tLjM0OC44MDdsNjU1Ljc2Ny4zNDNtLjA4Ny0uNTcybC0uNjkgMzcuNDk3bS4yOTYuMTEzbC02NTQuNTQzLjM4N20tLjAyLjkzbC0uNDY1LTM4LjY2MyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48ZyBmaWx0ZXI9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00MzggNDg0aDY1NXYzNy41SDQzOHoiLz48cGF0aCBkPSJNNDM3LjE1OSA0ODRsNjU2LjUwNS0uMjI3bS0uNjM1LS40NDNsLS4zNjkgMzkuMTI2bS4zOTItLjk3OWwtNjU1LjQ3Ny0uMTk3bS42Ni4zNzhsLS4yMzgtMzguMTIzbS0uNzEzLjMxNmw2NTUuODY2LS4zMTFtLjExLS4zMzRsLS40MSAzOC4xNDdtLjMyNy4wODJsLTY1NC44Mi0uMTgzbS0uMDQzLjI4MWwtLjI2Ni0zNy42NTgiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48L2c+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQzOCA0MjIuNzUyaDY1NXYzNy41SDQzOHoiLz48cGF0aCBkPSJNNDM3LjMyIDQyMi43NTJsNjU2Ljc1OC0uMzQxbS0uNjYxLS43MmwtLjIzNyAzOS4xMTVtLjYzMy0uNDQybC02NTYuMjc0LjI1Nm0uNDk0LjkyM0w0MzggNDIxLjkxMW0tLjU1NC42MTZsNjU2LjA5Mi0uMjY4bS4xMjgtLjY5M2wtLjI1OCAzOC42NzRtLjUzMi4wNjVsLTY1NS43ODEuMjk3bS0uMDI0LjgxNmwtLjA0OC0zOC43OTEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNDM4IDU0NWg2NTV2MzcuNUg0Mzh6Ii8+PHBhdGggZD0iTTQzNy41MTYgNTQ1bDY1Ni40MjQuMzY0bS0uNjQ3LS42MjhsLS42MiAzNy44NjltLjMwMy0uMzcxbC02NTQuODQxLjQzOG0uMzA5Ljk5MWwtLjQ1NS0zOS42MjltLS4zNDguODA3bDY1NS43NjcuMzQzbS4wODctLjU3MmwtLjY5IDM3LjQ5N20uMjk2LjExM2wtNjU0LjU0My4zODdtLS4wMi45M2wtLjQ2NS0zOC42NjMiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNDM4IDYwNmg2NTV2MzcuNUg0Mzh6Ii8+PHBhdGggZD0iTTQzNy43MTIgNjA2bDY1Ni4wOS4wNjhtLS42NDgtLjUzNWwuMDIgMzguNjIybS43MTUtLjNsLTY1Ni45MDktLjM4bS44NTEuMzFsLjE3LTM4LjEyNm0tLjE2NC4xMjRsNjU1LjQ0Mi4wOG0uMDI4LS40NTVsLjAyIDM4LjMyMm0uNjg3LjAzNmwtNjU2LjA1Ni0uMzk4bS0uMDQuMjkybC4xNDMtMzcuNzg1IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLWRhc2hhcnJheT0iOC4wLDguMCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQzOCA0ODRoNjU1djM3LjVINDM4eiIvPjxwYXRoIGQ9Ik00MzcuMTU5IDQ4NGw2NTYuNTA1LS4yMjdtLS42MzUtLjQ0M2wtLjM2OSAzOS4xMjZtLjM5Mi0uOTc5bC02NTUuNDc3LS4xOTdtLjY2LjM3OGwtLjIzOC0zOC4xMjNtLS43MTMuMzE2bDY1NS44NjYtLjMxMW0uMTEtLjMzNGwtLjQxIDM4LjE0N20uMzI3LjA4MmwtNjU0LjgyLS4xODNtLS4wNDMuMjgxbC0uMjY2LTM3LjY1OCIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGZpbGw9IiM5NDExMDAiIGQ9Ik01NjkuNSA0MjIuNzUySDY0M3YzNy41aC03My41em0xOTkuNSAwaDMxLjV2MzcuNUg3Njl6TTg5OCA0MjNoMTQ5djM3LjVIODk4em0tMjE1IDYwLjg3Nmg2NHYzNy41aC02NHptMzE4IDBoMTAuNXYzNy41SDEwMDF6bS0xNTkgMGg4Ny41djM3LjVIODQyem0tNDA0IDYxLjM3MmgzOS41djM3LjVINDM4em04Ni0uMjQ4aDU3LjV2MzcuNUg1MjR6bTg2LS4yNDhoMTU5LjV2MzcuNUg2MTB6bTMwOSAwaDE4djM3LjVoLTE4em0tNDEzLTYwLjg3Nmg2LjV2MzcuNUg1MDZ6bTQ4MCA2MS4zNzJoNi41djM3LjVIOTg2em01NC41LS40OTZoNTIuNXYzNy41aC01Mi41eiIvPjxwYXRoIGQ9Ik00MDIuMzUgNDE5LjMwM2wuMjY1IDIyOC42Nm0uMTc4LTIyOS4wMzVsLjIzNSAyMjcuMTQzIiBtYXJrZXItZW5kPSJ1cmwoI2IpIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzc5Ljk3MiA0MDEpIiBmaWxsPSIjMDAwIj48dHNwYW4gZm9udC1mYW1pbHk9IlJvYm90byBDb25kZW5zZWQiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI0MDAiIHg9IjAiIHk9IjEzIj5UaHJlYWRzPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzA4LjU3NiAzMzMuNSkiIGZpbGw9IiM5NDExMDAiPjx0c3BhbiBmb250LWZhbWlseT0iUm9ib3RvIENvbmRlbnNlZCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjQwMCIgeD0iMTcuNjIzIiB5PSIxMyI+QmxvY2tpbmcgSS9PPC90c3Bhbj4gPHRzcGFuIGZvbnQtZmFtaWx5PSJSb2JvdG8gQ29uZGVuc2VkIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNDAwIiB4PSIwIiB5PSIyOSI+KHdhc3RlZCBDUFUgdGltZSk8L3RzcGFuPjwvdGV4dD48cGF0aCBkPSJNNzAzLjU3NiAzNjcuMzgxYy0xMS4yNDkgNS41MzYtMjIuODQxIDEwLjE2Ny0zMi44MjEgMTYuNTgxLTE3LjEzMiAxMC43NjctMzAuNzEyIDIwLjgyNS0zOS42NDYgMjkuNzM1bTcyLjQ2Ny00Ni4zMTZjLTEwLjc0OSA1LjAzNi0yMi4zNDEgOS42NjctMzIuMzIxIDE2LjA4MS0xNy4xMzIgMTAuNzY3LTMwLjcxMiAyMC44MjUtMzkuNjQ2IDI5LjczNU03NzQuMzUzIDM3MC41YzEuNjg1IDQuNzY3IDQuNTcgOS40MjUgNS44MzYgMTYuMjkyIDEuNzQyIDguNDkzIDMuNDM4IDE1LjM5NyA0LjA0MSAyMy4wODhtLTkuODc3LTM5LjM4YzIuMTg1IDQuMjY3IDUuMDcgOC45MjUgNi4zMzYgMTUuNzkyIDEuNzQyIDguNDkzIDMuNDM4IDE1LjM5NyA0LjA0MSAyMy4wODhtMzEuOTE4LTQ5LjgyOWMzMi4zMyA1LjQ3MiA2Ni4wOTcgMTUuNjcgOTQuNjczIDI4LjE4NSAxOS4zODUgNy40NDIgMzIuOTA4IDE4Ljg3NyA0My4wMDEgMjUuOTcybS0xMzcuNjc0LTU0LjE1N2MzMi44MyA0Ljk3MiA2Ni41OTcgMTUuMTcgOTUuMTczIDI3LjY4NSAxOS4zODUgNy40NDIgMzIuOTA4IDE4Ljg3NyA0My4wMDEgMjUuOTcyIiBtYXJrZXItZW5kPSJ1cmwoI2MpIiBzdHJva2U9IiM5NDExMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjwvc3ZnPg==" alt="Blocking I/O"></p>
<p>你的一些线程会被阻塞，因为它们在等待 I/O 操作的完成，一些线程会准备处理 I/O 结果，一些线程会在做 CPU 密集型任务。</p>
<p>现代内核有非常好的调度器，但你不能指望它们像处理 5000 个线程那样容易。另外，线程并不便宜：创建一个线程需要几毫秒，一个新的线程会吃掉大约 1MB 的内存。</p>
<h4 id="使用异步来增加扩展性和效率"><a href="#使用异步来增加扩展性和效率" class="headerlink" title="使用异步来增加扩展性和效率"></a>使用异步来增加扩展性和效率</h4><p>当你使用异步 I/O 时，用更少的线程处理更多的并发连接是可能的。当一个 I/O 操作发生时，我们不是阻塞一个线程，而是转到另一个准备好的任务上，并在以后准备好时恢复最初的任务。</p>
<p>Vertx 使用事件循环来复用并发的工作负载。</p>
<p><img src="https://vertx.io/_next/static/images/event-loop-741b82e088447ba4062168b2ff60c7b3.svg" alt="Event loop"></p>
<p>在事件循环上运行的代码不应该执行阻塞的 I/O 或冗长的处理。但如果你有这样的代码，也不用担心。Vertx 有工人线程和 API，可以在事件循环上处理回事件。</p>
<h4 id="自行挑选最好的异步编程模型"><a href="#自行挑选最好的异步编程模型" class="headerlink" title="自行挑选最好的异步编程模型"></a>自行挑选最好的异步编程模型</h4><p>想要玩好异步编程需要更多的努力。在 Vertx 的核心模块，支持回调和 promises/futures，后者是一种简单而优雅的异步操作链模型。</p>
<p>使用 RxJava 可以实现高级的反应式编程，如果你喜欢更接近于传统的命令式编程，Vertx 还可以提供一流的 Kotlin coroutines 支持。</p>
<p><img src="https://vertx.io/_next/static/images/async-f15f5a50778c4a3a4872777d5554e388.svg" alt="Asynchronous programming"></p>
<p>Vertx 支持许多异步编程模型：方便为每个问题选择最有效的方法。</p>
<h3 id="Vertx-组件"><a href="#Vertx-组件" class="headerlink" title="Vertx 组件"></a>Vertx 组件</h3><p>上面只是对 Vertx 的设计和理念的简单介绍。想要了解 Vertx 我们可能还得熟悉他的几个基本概念和组。</p>
<h4 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h4><p>Event Loop 顾名思义，就是事件循环的。在 Vertx 的生命周期内，会不断的轮询查询事件。</p>
<p>刚才也介绍了，传统的多线程编程模型，每个请求就 fork 一个新的线程对请求进行处理。这样的编程模型有实现起来比较简单，一个连接对应一个线程。但是如果有大量的请求需要处理，就需要 fork 出大量的线程进行处理，对于操作系统来说调度大量线程造成系统负载升高。</p>
<p><img src="http://nas.beritra.com:18081/blog/202108/v2-c82beca9046448eadacd301be25958b3_1440w.jpg" alt="img"></p>
<p>Event Loop 不断的轮训，获取事件然后安排上不同的 Handler 处理对应的 Event。</p>
<p>这里要注意的是为了保证程序的正常运行，event 必须是非阻塞的。否则就会造成 Event Loop 的阻塞，影响 Vertx 的表现。但是现实中的程序肯定不能保证都是非阻塞的，Vertx 也提供了相应的处理阻塞的方法的机制。</p>
<h4 id="Verticle"><a href="#Verticle" class="headerlink" title="Verticle"></a>Verticle</h4><p>Verticle 是由 Vertx 部署和运行的代码块。默认情况一个 Vertx 实例维护了 N（默认情况下 N = CPU核数 x 2）个 Event Loop 线程。Verticle 实例可使用任意 Vertx 支持的编程语言编写，而且一个简单的应用程序也可以包含多种语言编写的 Verticle。</p>
<p>可以将 Verticle 想成 Actor Model 中的 Actor。一个应用程序通常是由在同一个 Vertx 实例中同时运行的许多 Verticle 实例组合而成。不同的 Verticle 实例通过向 Event Bus 收发送消息来相互通信。</p>
<blockquote>
<p>不了解 Actor 模型的同学可以参考 Golang 社区的一句话：不要通过共享内存来通信，而应该通过通信来共享内存。Actor 模型也是类似的理念，互相之间通过传递消息来共享数据，并且数据处理是单线程的，就不涉及到锁和竞争。</p>
</blockquote>
<p><img src="https://xilidou.com/images/verticle-threading-config.png" alt="verticle"></p>
<p>Verticle 其实可以分为几种：</p>
<ul>
<li>Stardand Verticle 是最常用的一类 Verticle —— 它们永远运行在 Event Loop 线程上。</li>
<li>Worker Verticle 会运行在 Worker Pool 中的线程上。一个实例绝对不会被多个线程同时执行。</li>
</ul>
<p>Stardand Verticle 在创建时被分配了到 Event Loop 线程上，并且启动方法是通过 Event Loop 调用的。当你从 Event Loop 中调用任何其他需要处理核心 API 的方法时，Vertx 会保证这些程序，在同一个 Event Loop 中执行。</p>
<p>这意味着 Vertx 保证 verticle 实例中的所有代码总是在同一个事件循环中执行（只要你不创建自己的线程并调用它！）。</p>
<p>所以我们可以将所有代码写成单线程，让 Vertx 来担心线程和扩展的问题。不用担心同步和易失性的问题了，而且也避免了许多其他的竞赛条件和死锁的情况，这些情况传统多线程应用开发时非常普遍。</p>
<p>Worker Verticle 和 Stardand Verticle 一样，但它是使用 Vertx Worker 线程池的线程来执行的，而不是使用事件循环。</p>
<p>Worker Verticle 是为调用阻塞代码而设计的，因为它们不会阻塞任何 Event Loop。</p>
<p>如果你不想使用工作线程来运行阻塞代码，你也可以在 Event Loop 中直接运行内联阻塞代码。</p>
<p>Vertx 不会由一个以上的线程同时执行 Worker Verticle 实例，但可以由不同的线程在不同时间执行。</p>
<h4 id="Event-bus"><a href="#Event-bus" class="headerlink" title="Event bus"></a>Event bus</h4><p>上面说了 Vertical 互相之间需要通过消息来贡献数据，而 Event bus 就是承载消息的消息总线。可能类比后端常用的 MQ 就更加容易理解了。</p>
<p><img src="https://xilidou.com/images/event-bus.png" alt="Event bus"></p>
<h3 id="Vertx-的使用原则"><a href="#Vertx-的使用原则" class="headerlink" title="Vertx 的使用原则"></a>Vertx 的使用原则</h3><p>使用 Vertx 的时候要遵循基本原则：</p>
<h4 id="Don’t-call-us-we’ll-call-you"><a href="#Don’t-call-us-we’ll-call-you" class="headerlink" title="Don’t call us, we’ll call you."></a>Don’t call us, we’ll call you.</h4><p>Vertx 的 API 基本都是事件驱动的，这意味着当 Vertx 中发生你感兴趣的事情时，Vertx 会通过向你发送事件来调用你。</p>
<p>事件有可能是：</p>
<ul>
<li>定时器启动了</li>
<li>一些数据已经到达套接字上</li>
<li>一些数据被从磁盘上读取</li>
<li>发生了一个异常</li>
<li>一个 HTTP 服务器收到了一个请求</li>
</ul>
<p>等等，比如一个处理 http 请求事件的写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">server.requestHandler(request -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  <span class="comment">// This handler will be called every time an HTTP request is received at the server</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  request.response().end(<span class="string">"hello world!"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr></table></figure>

<p>如果事件被触发，Vertx 会自动的进行异步调用。</p>
<h4 id="不要阻塞！"><a href="#不要阻塞！" class="headerlink" title="不要阻塞！"></a>不要阻塞！</h4><p>除了极少数的例外（即一些以 Sync 结尾的文件系统操作），Vertx 中的所有 API 都不会阻塞调用线程。</p>
<p>如果可以立即提供一个结果，它就会立即返回，否则你通常会提供一个 handler，在一段时间后接收事件。</p>
<p>因为 Vertx 的 API 都不阻塞线程，所以可以使用 Vertx 只用少量的线程来处理大量的并发性。</p>
<p>前面也说了，传统线程模型通过创建大量的线程来处理请求，而 Vertx 通过在 Event Loop 中调用你的处理程序来应对并发请求。这其实就是并发模型中的反应器模式（Reactor Pattern）——以高性能著称的 Node.js 也是这种模式。</p>
<p>在一个标准的反应器实现中，有一个单一的事件循环线程，它在一个循环中运行，当所有的事件到达时，将它们传递给所有的处理程序。</p>
<p>单个线程的问题是它在任何时候都只能在单个核心上运行，所以如果你想让你的单线程 Reactor 应用（例如你的 Node.js 应用）在多核心服务器上扩展，你必须启动和管理许多不同的进程。</p>
<p>Vertx 的工作方式略有不同。每个 Vertx 实例不是一个单一的事件循环，而是维护几个事件循环。默认情况下，我们根据机器上可用的核心数量来选择数量，也可以自行设置。</p>
<p>也就是说一个 Vertx 进程可以在服务器上扩展，他们把这种模式称为多反应器模式，以区别于单线程的反应器模式。</p>
<h4 id="黄金法则——不要阻塞事件循环"><a href="#黄金法则——不要阻塞事件循环" class="headerlink" title="黄金法则——不要阻塞事件循环"></a>黄金法则——不要阻塞事件循环</h4><p>我们已经知道 Vertx 的 API 是非阻塞的，不会阻塞 Event Loop，但如果你在处理程序中阻塞 Event Loop，那就没有什么帮助了。</p>
<p>如果你这样做了，那么这个 Event Loop 在被阻塞的时候将不能做任何其他事情，应用程序就会完全停滞不前，所以不要这样做。</p>
<p>阻塞的例子包括：</p>
<ul>
<li><p>Thread.sleep()</p>
</li>
<li><p>在锁上等待</p>
</li>
<li><p>等待一个 mutex 或监视器（如同步部分）。</p>
</li>
<li><p>做一个长期的数据库操作并等待结果</p>
</li>
<li><p>做一个复杂的计算，需要一些重要的时间。</p>
</li>
<li><p>在一个循环中旋转</p>
</li>
</ul>
<p>具体等待多长的时间算是阻塞？</p>
<p>如果你有一个单一的事件循环，并且你想每秒处理 10000 个 http 请求，那么很明显，每个请求的处理时间不能超过 0.1 毫秒，所以你不能阻塞超过这个时间。</p>
<p>如果你的应用程序没有反应，这可能是你在某个地方阻塞了一个事件循环的迹象。为了帮助你诊断这类问题，如果Vert.x检测到一个事件循环在一段时间内没有返回，它会自动记录警告。如果你在日志中看到类似这样的警告，那么你应该进行调查。</p>
<h3 id="具体用法"><a href="#具体用法" class="headerlink" title="具体用法"></a>具体用法</h3><p>Vertx 的原理搞清楚之后，使用就非常简单了。比如启动一个 http 服务器，只需要这么一点代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">vertx.createHttpServer().requestHandler(request -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  request.response().end(<span class="string">"Hello world"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">&#125;).listen(<span class="number">8080</span>);</span></pre></td></tr></table></figure>

<p>还可以用他封装好的 http client 工具：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">WebClient client = WebClient.create(vertx);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Send a GET request</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">client</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">  .get(<span class="number">8080</span>, <span class="string">"myserver.mycompany.com"</span>, <span class="string">"/some-uri"</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">  .send()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">  .onSuccess(response -&gt; System.out</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    .println(<span class="string">"Received response with status code"</span> + response.statusCode()))</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">  .onFailure(err -&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    System.out.println(<span class="string">"Something went wrong "</span> + err.getMessage()));</span></pre></td></tr></table></figure>

<p>更多用法参考官方文档吧，写的比较详细就不赘述。</p>
<h4 id="干掉回调地狱"><a href="#干掉回调地狱" class="headerlink" title="干掉回调地狱"></a>干掉回调地狱</h4><p>在使用 Vertx 的异步无阻塞 API 时，如果我们要保证一系列操作的执行顺序，通常不能像一般的框架那样简单的依次调用，而是依次把要调用的方法放在前一个方法的事件处理函数中，用回调函数用的比较多的同事一定遇到过这种情况：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">vertx.fileSystem().writeFile(filePath, buffer, write -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (write.succeeded()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">        vertx.createNetClient().connect(<span class="number">1234</span>, <span class="string">"localhost"</span>, connect -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (connect.succeeded()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">                connect.result().sendFile(filePath, send -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">                    connect.result().close(); <span class="comment">// 关闭不再使用的Socket</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">                    <span class="keyword">if</span> (send.succeeded()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">                        vertx.fileSystem().copy(filePath, backupPath, copy -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">                            <span class="keyword">if</span> (copy.succeeded()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">                                vertx.fileSystem().delete(filePath, delete -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">                                    <span class="keyword">if</span> (delete.succeeded()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">                                        logger.info(<span class="string">"Hello, callback hell."</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">                                    &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">                                        logger.error(delete.cause().getMessage());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">                                    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">                                &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">                                logger.error(copy.cause().getMessage());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">                            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">                        &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">                        logger.error(send.cause().getMessage());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">                    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">                &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">            &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">                logger.error(connect.cause().getMessage());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">        &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">    &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">        logger.error(write.cause().getMessage());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr></table></figure>

<p>这段代码先是把一段内容写到一个新文件里，然后建立一个 <em>TCP</em> 连接把文件发过去，再把这个文件拷贝到另一个目录作为备份，最后把原文件删掉。回调函数一层层的嵌套，形成了这样的代码结构，这就是<strong>回调地狱</strong>。</p>
<p>嵌套个两三层，其实还可以接受，如果业务流程比较长，这样的代码就很难看了。Vertx 提供了四种方法解决这个问题：</p>
<ul>
<li>Future</li>
<li>Vert.x Rx</li>
<li>Vert.x Async</li>
<li>Kotlin coroutine</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Future</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">AsyncResult</span>&lt;<span class="title">T</span>&gt;, <span class="title">Handler</span>&lt;<span class="title">AsyncResult</span>&lt;<span class="title">T</span>&gt;&gt; </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 用结果 result 将这个未完成的 AsyncResult&lt;T&gt; 设为成功</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">complete</span><span class="params">(T result)</span></span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 用异常 cause 将这个未完成的 AsyncResult&lt;T&gt; 设为失败</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fail</span><span class="params">(Throwable cause)</span></span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 设置该 Future 对象被完成时应该调用的处理函数</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    <span class="function">Future&lt;T&gt; <span class="title">setHandler</span><span class="params">(Handler&lt;AsyncResult&lt;T&gt;&gt; handler)</span></span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 其他方法</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>所以我们用 Future 改写上面的代码的话：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Future&lt;Void&gt; futureWrite = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Future&lt;NetSocket&gt; futureConnect = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">Future&lt;Void&gt; futureSend = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">Future&lt;Void&gt; futureCopy = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">Future&lt;Void&gt; futureDelete = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">vertx.fileSystem().writeFile(filePath, buffer, futureWrite);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">futureWrite.setHandler(ar -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (ar.succeeded()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">        vertx.createNetClient().connect(<span class="number">1234</span>, <span class="string">"localhost"</span>, futureConnect);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">        logger.error(ar.cause().getMessage());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">futureConnect.setHandler(ar -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (ar.succeeded()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">        ar.result().sendFile(filePath, futureSend);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        logger.error(ar.cause().getMessage());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// ......</span></span></pre></td></tr></table></figure>

<p>看起来效果还不错，整齐多了，代码也不会随着业务流程长度而无限制缩进了。不过这样还是存在两个问题：</p>
<ul>
<li>颠倒两个代码块的顺序，该程序仍然是可以运行的，这样一来没有顺序上的约束，很容易产生混乱的代码。</li>
<li>异常处理存在大量重复代码。</li>
</ul>
<p>好在 Future 还提供了一个用于链式调用的方法 compose，我们使用 Future 的 compose 方法再次重构这部分代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Future&lt;Void&gt; futureWrite = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Future&lt;NetSocket&gt; futureConnect = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">Future&lt;Void&gt; futureSend = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">Future&lt;Void&gt; futureCopy = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">Future&lt;Void&gt; futureDelete = Future.future();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">vertx.fileSystem().writeFile(filePath, buffer, futureWrite);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">futureWrite.compose(v -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    vertx.createNetClient().connect(<span class="number">1234</span>, <span class="string">"localhost"</span>, futureConnect);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">&#125;, futureConnect).compose(socket -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    socket.sendFile(filePath, futureSend);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">&#125;, futureSend).compose(v -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    futureConnect.result().close(); <span class="comment">// 关闭不再使用的Socket</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    vertx.fileSystem().copy(filePath, backupPath, futureCopy);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">&#125;, futureCopy).compose(v -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    vertx.fileSystem().delete(filePath, futureDelete);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">&#125;, futureDelete).setHandler(ar -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (ar.succeeded()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">        logger.info(<span class="string">"Hello, future compose!!!"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (futureConnect.succeeded()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">            futureConnect.result().close(); <span class="comment">// 关闭不再使用的Socket</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">        logger.error(ar.cause().getMessage());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr></table></figure>

<p>除了最后一个回调函数 ，前面的所有回调函数的参数并不是一个 <code>AsyncResult&lt;T&gt;</code> 对象，而是我们期望的结果，即一个类型为 <code>T</code> 的对象；也就是说每次 compose 只处理上一步成功的情况，失败的异常会被层层传递到最后一个回调函数处理——这就有点像传统的 <code>try catch</code> 结构。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><h4 id="Vertx-优点"><a href="#Vertx-优点" class="headerlink" title="Vertx 优点"></a>Vertx 优点</h4><ul>
<li>性能强悍，始终处于 JVM 语言第一梯队。</li>
<li>轻量级，云原生时代很适合跟容器搭配。</li>
<li>跨语言，像跟 Kotlin 的协程搭配，可以写的很优雅</li>
</ul>
<h4 id="Vertx-缺点"><a href="#Vertx-缺点" class="headerlink" title="Vertx 缺点"></a>Vertx 缺点</h4><ul>
<li>有一定的开发、学习成本，想要适应全异步的编程，既需要生态支持，也需要编程思维的转变。</li>
<li>定位类似于脚手架而不是大而全的框架，如果需要应对的是复杂、业务规模庞大、不断变动和扩张的应用，那么 Spring 还是不可替代</li>
</ul>
<p>参考资料：</p>
<p><a href="https://zh.wikipedia.org/wiki/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B" target="_blank" rel="noopener">响应式编程Wiki定义</a></p>
<p><a href="https://blog.csdn.net/lonelymanontheway/article/details/88657609" target="_blank" rel="noopener">编程范式：函数式编程&amp;防御式编程&amp;响应式编程&amp;契约式编程&amp;流式编程</a></p>
<p><a href="https://www.jianshu.com/p/295e3122b466" target="_blank" rel="noopener">Vertx-介绍及快速入门</a></p>
<p><a href="https://gengteng.gitbooks.io/my-vertx-guide/content/chapter3/section5.html" target="_blank" rel="noopener">回调地狱与 Future 对象</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/vertx/" rel="tag"># vertx</a>
              <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" rel="tag"># 响应式</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/07/19/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/" rel="prev" title="面试经验分享">
      <i class="fa fa-chevron-left"></i> 面试经验分享
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#响应式介绍"><span class="nav-number">1.</span> <span class="nav-text">响应式介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vert-x"><span class="nav-number">2.</span> <span class="nav-text">Vert.x</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#介绍"><span class="nav-number">2.1.</span> <span class="nav-text">介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#最开始的多线程"><span class="nav-number">2.1.1.</span> <span class="nav-text">最开始的多线程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多线程简单但是受限"><span class="nav-number">2.1.2.</span> <span class="nav-text">多线程简单但是受限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用异步来增加扩展性和效率"><span class="nav-number">2.1.3.</span> <span class="nav-text">使用异步来增加扩展性和效率</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自行挑选最好的异步编程模型"><span class="nav-number">2.1.4.</span> <span class="nav-text">自行挑选最好的异步编程模型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vertx-组件"><span class="nav-number">2.2.</span> <span class="nav-text">Vertx 组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Event-Loop"><span class="nav-number">2.2.1.</span> <span class="nav-text">Event Loop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Verticle"><span class="nav-number">2.2.2.</span> <span class="nav-text">Verticle</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Event-bus"><span class="nav-number">2.2.3.</span> <span class="nav-text">Event bus</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vertx-的使用原则"><span class="nav-number">2.3.</span> <span class="nav-text">Vertx 的使用原则</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Don’t-call-us-we’ll-call-you"><span class="nav-number">2.3.1.</span> <span class="nav-text">Don’t call us, we’ll call you.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#不要阻塞！"><span class="nav-number">2.3.2.</span> <span class="nav-text">不要阻塞！</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#黄金法则——不要阻塞事件循环"><span class="nav-number">2.3.3.</span> <span class="nav-text">黄金法则——不要阻塞事件循环</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#具体用法"><span class="nav-number">2.4.</span> <span class="nav-text">具体用法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#干掉回调地狱"><span class="nav-number">2.4.1.</span> <span class="nav-text">干掉回调地狱</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">2.5.</span> <span class="nav-text">总结</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Vertx-优点"><span class="nav-number">2.5.1.</span> <span class="nav-text">Vertx 优点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vertx-缺点"><span class="nav-number">2.5.2.</span> <span class="nav-text">Vertx 缺点</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Beritra"
      src="/images/avator.jpg">
  <p class="site-author-name" itemprop="name">Beritra</p>
  <div class="site-description" itemprop="description">Beritra's Blogs</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/beritra" title="Github → https:&#x2F;&#x2F;github.com&#x2F;beritra" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>Github</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://weibo.com/u/3315421093" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;3315421093" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">京ICP备16042931号-3 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Beritra</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">395k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">10:58</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
